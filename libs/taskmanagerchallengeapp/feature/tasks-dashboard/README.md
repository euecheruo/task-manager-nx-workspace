Role-Based Access Control Task Manager (Nx Monorepo)This is a full-stack enterprise application demonstrating a scalable, secure Task Management System using Angular 18, NestJS, and PostgreSQL. It implements defense-in-depth security with JWT authentication, token rotation, granular RBAC/ABAC permissions, and reactive state management using Angular Signals.FeaturesSecurityJWT Authentication: Stateless authentication with secure token handling.Token Rotation: Reuse detection and automatic revocation of compromised token families.RBAC: Granular permission matrix (e.g., create:tasks, read:tasks).ABAC: Resource-level ownership guards (e.g., users can only delete their own tasks).Frontend (Angular 18)Signals: Full adoption of Signals for glitch-free, zone-less state management.Directives: Structural directives for conditional permission-based rendering.Interceptors: Automatic 401 recovery and token refresh queueing.Backend (NestJS)Modular Architecture: Strict separation of Auth, User, and Task domains.Guards: Stacked guards for validation (JwtAuthGuard -> PermissionGuard -> TaskOwnershipGuard).TypeORM: Repository pattern with complex relation mapping.Tech StackLayerTechnologyPurposeFrontendAngular 18Application FrameworkBootstrap 5UI Component LibraryRxJSHTTP Stream HandlingBackendNestJSServer-Side FrameworkTypeORMORM / Data Access LayerPassportAuthentication MiddlewareDatabasePostgreSQLPersistence LayerToolingNxMonorepo Build SystemDockerContainerization (Optional)Getting StartedPrerequisitesNode.js v18 or higherPostgreSQL running locally (Default Port: 5432)Nx CLI installed globally: npm install -g nxInstallation**Clone the repository:**bashgit clone <repo-url>cd task-manager-monorepo
Install dependencies:Bashnpm install
Environment Configuration:Create a .env.development file in apps/api:Code snippetPOSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=yourpassword
POSTGRES_DB=task_db

# Security Secrets (Change these for production!)
JWT_ACCESS_SECRET=complex_secret_key_access
JWT_REFRESH_SECRET=complex_secret_key_refresh
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d
Database Migration & Seeding:The project includes a custom seeder to populate Roles, Permissions, and Initial Users.Bash# Run the migration and seeder
npx nx run api:migration --migrate=seed
Running the ApplicationThe Nx architecture allows running both frontend and backend in parallel.Start the Backend (API):Bashnpx nx serve api
API URL: http://localhost:3333/apiSwagger Documentation: http://localhost:3333/swaggerStart the Frontend:Bashnpx nx serve app
Application URL: http://localhost:4200User Roles & Seed DataThe application comes pre-seeded with the following accounts to demonstrate the RBAC capabilities:EmailPasswordRoleCapabilitiesuser1@faketest.comMK2~DT?8R^=G~5oaM6Gw+8EditorCan create tasks, delete own tasks, assign users.user2@faketest.com4V+726=mk>esc9DjH4=5r8ViewerRead-only access to lists; can complete tasks assigned to them.Architecture OverviewDirectory Structure (Nx Enterprise Pattern)libs/├── api/│   ├── auth/          # Strategies (JWT/Local), Guards (Token/Permission)│   ├── tasks/         # Business Logic: Tasks Service, Controller, Repository│   └── users/         # Business Logic: Users Service, Profile management├── app/│   ├── feature/       # Lazy-loaded Feature Libraries (Dashboard, Login)│   ├── data-access/   # Frontend State (Signals), API Services│   └── shared/        # Reusable Utilities (Directives, Pipes)Security Implementation DetailsToken Storage: Access Tokens are stored in memory/local storage; Refresh Tokens are handled securely.Token Hashing: The database stores SHA-256 hashes of refresh tokens. Even if the DB is compromised, user sessions cannot be hijacked without the raw token from the user's device.Reuse Detection: If a valid refresh token is presented after it has already been rotated, the system assumes theft and revokes all tokens for that user.LicenseMIT
